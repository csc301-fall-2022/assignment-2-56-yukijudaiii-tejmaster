<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saved Items</title>
    <link href="./media/logo.jpg" rel="icon">
    <link rel="stylesheet" href="../css/stylesheet.css">
    <script src = "../backend/trial.js"> </script>
</head>


<body>
    <div class="container">
    <aside>
    <header> <h1> Cashier 56  </h1></header>
    <a href="index.html"><img src="../resources/logo.jpg" class="logo" alt="logo" title="Terry"></a> 
    <nav>
    <ul>
        <li> <a href="index.html">Home</a></li>
        <li> <a href="items.html">Saved Items</a></li>
        <li> <a href="contact.html">Contact</a></li>
    </ul>
    </nav>
    </aside>
    
    <main>
        <article>
            <h1>Saved Item</h1>
            <section>
                <p> Here is a list of saved items </p>
            </section>
            <button type="button" class="add" id="add_button" onclick="myFunction()">Add New Item</button>
            <script>
                function myFunction() {
                  let text;
                  let product = prompt("New Product Name:");
                  let price = prompt("New Product Price:");
                  if (product == null || product == "" || price == null || price == "") {
                    text = "User cancelled the prompt.";
                  } 
                  else {
                    // save the text to item.json
                    var fs = require('fs');
                    var obj = {product: product, price: price};
                    var json = JSON.stringify(obj);
                    fs.writeFile('item.json', json, 'utf8', callback);
                    function callback(err) {
                        if (err) throw err;
                        console.log('Saved!');
                    }
                  }
                  
                }
                document.addEventListener("DomContentLoaded", function(){console.log("aaa")
                document.getElementById("add_button").onclick = addItem()});
                function addItem(){
                    //var name = document.getElementById("name").value;
                    //var price = document.getElementById("price").value;
                    let text;
                    let product = prompt("New Product Name:");
                    let price = prompt("New Product Price:");
                      if (product == null || product == "" || price == null || price == "") {
                        text = "User cancelled the prompt.";
                      } else{
                        var row = document.createElement("tr");
                        row.id = name.replace(' ', '_');
                        var n = document.createElement("td");
                        n.innerHTML = name;
                        var p = document.createElement("td");
                        p.innerHTML = price;
                        row.appendChild(n);
                        row.appendChild(p);
                        document.getElementById("myTable").appendChild(row);
                        var b = document.createElement("button");
                        b.appendChild(document.createTextNode("Delete"));
                        b.onclick = function(){
                            document.getElementById("myTable").removeChild(row);
                        }
                        var d = document.createElement("td");
                        d.appendChild(b);
                        row.appendChild(d);
                  }
                }

                function deleteItem(id){
                    var row = document.getElementById(id);
                    row.parentNode.removeChild(row);
                }

                </script> 
            <table id="myTable">
                <thead>
                  <tr>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody id = "body">

                </tbody>
                <tfoot>
                  <tr>
                    <td>My Footer</td>
                  </tr>
                </tfoot>
              </table>
        </article>
        <!-- <div>
            <img src="./media/pic1.jpg" style="width:20%;" alt="Terry"
            onmouseover="this.src='./media/pic2.jpg'"
            onmouseout="this.src='media/pic1.jpg'"
            > 

        </div> -->
        <footer>
            <h3>&copy;2022 Xiangyu Tu, Houyi Chen</h3>
        </footer>
    </main>
    </div>

</body>
</html>